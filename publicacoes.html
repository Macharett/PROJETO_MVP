<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editora Unifeso - Pesquisa</title>
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/style-publicacoes.css">
    <link rel="icon" type="png" href="assets/imagens/icon.png">
</head>

<body>
    <!-- CABEÇALHO -->
    <header>
        <a href="index.html">
            <img src="assets/imagens/logoEditora.png" alt="Logotipo UNIFESO" class="logo">
        </a>
        <nav>
            <!--Menus-->
            <ul>
                <li><a href="index.html">Início</a></li>
                <li><a href="publicacoes.html">Publicações</a></li>
                <li><a href="cadastro.html">Cadastrar Publicação</a></li>
                <li><a href="login.html">Login</a></li>
            </ul>
        </nav>
    </header>

    <main class="content-container">
        <div class="container-30">
            <div class="pesquisa">
                <div class="filtrepor">
                    <h1>Filtre por</h1>
                </div>
                <div class="dados">
                    <fieldset>
                        <label for="q">Palavra-chave</label>
                        <input type="text" name="q" id="q" maxlength="150" placeholder="Digite a palavra-chave" class="search-input" />
                    </fieldset>

                    <fieldset>
                        <label for="filter_date1">Data:</label>
                        <input type="date" id="filter_date1" name="d1" placeholder="" />
                    </fieldset>

                    <fieldset>
                        <label for="tax-category">Categoria:</label>
                        <select id="tax-category" name="t" multiple>
                            <option value="Cartilhas e Manuais">Cartilhas e Manuais</option>
                            <option value="Catálogos">Catálogos</option>
                            <option value="Publicações">Publicações</option>
                            <option value="Regimento Interno">Regimento Interno</option>
                            <option value="Revistas">Revistas</option>
                        </select>
                    </fieldset>

                    <fieldset>
                        <label for="tags">Assunto:</label>
                        <select name="tags[]" id="tags" multiple>
                            <option value="Ab-rogação">Ab-rogação</option>
                            <option value="Abuso">Abuso</option>
                            <option value="Abuso de autoridade">Abuso de autoridade</option>
                            <option value="Abuso de poder">Abuso de poder</option>
                            <option value="Abuso do poder econômico">Abuso do poder econômico</option>
                        </select>
                    </fieldset>
                </div>

                <div class="botoes">
                    <button type="button" class="bt-filtrar" onclick="filtrarPublicacoes()">Filtrar</button>
                    <button type="reset" class="bt-limpar" onclick="limparFiltros()">Limpar</button>
                </div>
            </div>
        </div>

        <div class="container-60">
            <section class="catalogo">
                <!-- Exemplo de publicações -->
                <a href="detalhes1.html" class="link" data-categoria="Cartilhas e Manuais" data-tags="Ab-rogação, Abuso de autoridade">
                    <div class="publicacao-card">
                        <img src="assets/imagens/publicacao1.jpg">
                        <div class="detalhes">
                            <h1 class="titulo">Discursos sobre leitura entre professores.</h1>
                        </div>
                    </div>
                </a>
                
                <a href="detalhes2.html" class="link" data-categoria="Revistas" data-tags="Abuso, Abuso de poder">
                    <div class="publicacao-card">
                        <img src="assets/imagens/publicacao2.jpg">
                        <div class="detalhes">
                            <h1 class="titulo">Quem cuida do cuidador?</h1>
                        </div>
                    </div>
                </a>
                
                <a href="detalhes3.html" class="link" data-categoria="Publicações" data-tags="Abuso do poder econômico">
                    <div class="publicacao-card">
                        <img src="assets/imagens/publicacao3.jpg">
                        <div class="detalhes">
                            <h1 class="titulo">Resíduos orgânicos alternativos nos processos de compostagem e vermicompostagem</h1>
                        </div>
                    </div>
                </a>
                
                <a href="detalhes4.html" class="link" data-categoria="Cartilhas e Manuais" data-tags="Ab-rogação, Abuso">
                    <div class="publicacao-card">
                        <img src="assets/imagens/publicacao4.jpg">
                        <div class="detalhes">
                            <h1 class="titulo">A (de)Formação científica do médico</h1>
                        </div>
                    </div>
                </a>
                
                <a href="detalhes5.html" class="link" data-categoria="Revistas" data-tags="Abuso, Abuso do poder econômico">
                    <div class="publicacao-card">
                        <img src="assets/imagens/publicacao5.jpg">
                        <div class="detalhes">
                            <h1 class="titulo">Ação a distância e não-localidade</h1>
                        </div>
                    </div>
                </a>
                
                <a href="detalhes6.html" class="link" data-categoria="Catálogos" data-tags="Abuso de autoridade">
                    <div class="publicacao-card">
                        <img src="assets/imagens/publicacao6.jpg">
                        <div class="detalhes">
                            <h1 class="titulo">Um olhar sociológico sobre o conceito de trabalho</h1>
                        </div>
                    </div>
                </a>
                
                <a href="detalhes7.html" class="link" data-categoria="Publicações" data-tags="Abuso do poder econômico">
                    <div class="publicacao-card">
                        <img src="assets/imagens/publicacao7.jpg">
                        <div class="detalhes">
                            <h1 class="titulo">Sistema de informação em saúde mental</h1>
                        </div>
                    </div>
                </a>
                
                <a href="detalhes8.html" class="link" data-categoria="Revistas" data-tags="Abuso, Ab-rogação">
                    <div class="publicacao-card">
                        <img src="assets/imagens/publicacao8.jpg">
                        <div class="detalhes">
                            <h1 class="titulo">Canto dos Poetas</h1>
                        </div>
                    </div>
                </a>
                
            </section>
        </div>
    </main>

    <footer>
        <p>&copy; 2024 Editora Unifeso. Todos os direitos reservados.</p>
    </footer>

    <script>
        function filtrarPublicacoes() {
            const palavraChave = document.getElementById('q').value.toLowerCase();
            const categoriaSelecionada = Array.from(document.getElementById('tax-category').selectedOptions).map(option => option.value.toLowerCase()); 
            const tagsSelecionadas = Array.from(document.getElementById('tags').selectedOptions).map(option => option.value.toLowerCase());

            const publicacoes = document.querySelectorAll('.publicacao-card');

            publicacoes.forEach(publicacao => {
                const categoria = publicacao.closest('a').getAttribute('data-categoria').toLowerCase();
                const tags = publicacao.closest('a').getAttribute('data-tags').toLowerCase().split(', ');

                const correspondeCategoria = categoriaSelecionada.length === 0 || categoriaSelecionada.includes(categoria);
                const correspondeTags = tagsSelecionadas.length === 0 || tagsSelecionadas.every(tag => tags.includes(tag));
                const correspondePalavraChave = palavraChave === '' || publicacao.querySelector('.titulo').textContent.toLowerCase().includes(palavraChave);

                if (correspondeCategoria && correspondeTags && correspondePalavraChave) {
                    publicacao.closest('a').style.display = 'block';
                } else {
                    publicacao.closest('a').style.display = 'none';
                }
            });
        }

        function limparFiltros() {
            document.getElementById('q').value = '';
            document.getElementById('filter_date1').value = '';
            document.getElementById('tax-category').value = '';
            document.getElementById('tags').value = '';
            filtrarPublicacoes();
        }
    </script>

</body>

</html>
